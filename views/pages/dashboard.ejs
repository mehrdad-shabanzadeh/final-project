<!DOCTYPE html>
<html lang="en">
	<head>
		<%- include('../partials/headTag.ejs') %>
		<!-- <link rel="stylesheet" type="text/css" href="/css/signup.css" /> -->
		<title>Dashboard</title>
	</head>
	<body>
		<!-- Navbar -->
		<%- include('../partials/navbar.ejs') %>

		<!-- Dashboard Start -->
		<div class="container-fluid">
			<div id="alert" role="alert"></div>

			<div class="row">
				<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
					<div class="sidebar-sticky pt-3">
						<ul class="nav flex-column">
							<li class="nav-item">
								<div style="width: 170px; height: 200px;">
									<img src="/uploads/<%= user.avatar  ? user.avatar : 'defaultProfileAvatar.png' %>" alt="Image" class="rounded" style="width: 100%; height: 100%;" />
								</div>
							</li>
							<li class="nav-item">
								<br />
								<h4 class="mt-2"><%= user.firstName %> <%= user.lastName %></h4>
							</li>
						</ul>
						<a type="button" href="/api/user/editProfile" class="btn btn-primary">Edit Profile</a>
						<br />
						<button id="logout" class="btn btn-primary mt-3">Sign out</button>
					</div>
				</nav>

				<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
					<div class="d-flex justify-content-between mt-4">
						<h2>ARTICLES</h2>
						<a type="button" href="/api/articles/addArticle" class="btn btn-primary mb-2">Add Article</a>
					</div>

					<!-- Start articles -->
					<% for (let i = 0; i < articles.length; i++) { %>
					<!-- loop in the articles -->
					<div class="card mt-3">
						<div class="row no-gutters">
							<div class="col-md-4">
								<img src="/uploads/<%= articles[i].image %>" class="card-img" alt="<%= articles[i].title %> " />
							</div>
							<div class="col-md-8">
								<div class="card-body">
									<h5 class="card-title"><%= articles[i].title %></h5>
									<p class="card-text"><small class="text-muted"><%= articles[i].createdAt %></small></p>
									<p class="card-text"><%= articles[i].summary %></p>
									<div class="text-right">
										<a href="/api/articles/<%= articles[i]._id %>" type="button" id="readMore" class="btn btn-outline-secondary">Read more</a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<% } %>
					<!-- End articles -->
				</main>
			</div>
		</div>
		<!-- Dashboard End -->

		<%- include("../partials/scripts.ejs") %>
		<script src="/js/dashboard.js"></script>
	</body>
</html>
